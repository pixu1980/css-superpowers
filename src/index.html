<!DOCTYPE html>
<html lang="it">
  <head>
    <meta charset="utf-8" />
    <title>CSS Superpowers</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./styles/index.scss" />
  </head>
  <body>
    <div class="reveal">
      <div class="slides">
        <section intro>
          <h2>
            CSS <span>S</span><span>u</span><span>p</span><span>e</span><span>r</span><span>p</span><span>o</span
            ><span>w</span><span>e</span><span>r</span><span>s</span>
          </h2>
          <h3>with <mark>@property (--*)</mark> and <mark>@layer</mark></h3>
        </section>

        <section pixu>
          <img src="./assets/pixu.jpeg" alt="" />
          <h3>Emiliano <mark>Pisu</mark></h3>
          <p>
            Frontend Development Lead
            <br />
            @ <mark>MONK</mark> Software
          </p>
          <small>
            <ul>
              <li>Company: www.monksoftware.it</li>
              <li>LinkedIn: www.linkedin.com/in/pixu1980</li>
            </ul>
          </small>
        </section>

        <section>
          <h4><mark>Over-engineering</mark> CSS codebase</h4>
          <p class="fragment">with an <mark>eye on the future</mark></p>
        </section>

        <section>
          <blockquote>
            <img src="./assets/doc-brown.avif" />
            <small>
              Please excuse the crudity of this model: <mark>I didn't have time</mark> to build it to scale or paint it.
            </small>
          </blockquote>
          <p><small>Doc. Emmet L. Brown</small></p>
        </section>

        <section>
          <h4>So... <mark>what is</mark> Over-engineering?</h4>
        </section>

        <section>
          <blockquote>
            <small>
              Over-engineering is the act of <mark>designing a product</mark>, or <mark>providing a solution</mark> to a
              problem, that is complicated in a way that <mark>provides no value</mark> or could have been designed to
              be simpler.
            </small>
          </blockquote>
          <p><small>Wikipedia</small></p>
        </section>

        <section>
          <img src="./assets/family-guy.gif" />
        </section>

        <!-- topics -->
        <section>
          <section>
            <h4>What are we going to <br /><mark>talk about</mark> today?</h4>
          </section>
          <section>
            <h4>CSS Custom Properties</h4>
            <small>
              <p><mark>--*</mark> and <mark>@property</mark></p>
              <ul>
                <li class="fragment">centralizing values</li>
                <li class="fragment">flowing with the cascade</li>
                <li class="fragment">dynamic and conditional overrides</li>
                <li class="fragment">responsive</li>
                <li class="fragment">animations</li>
                <li class="fragment">interactions with js</li>
              </ul>
            </small>
          </section>
          <section>
            <h4>CSS Layers</h4>
            <small>
              <p><mark>@layer</mark></p>
              <ul>
                <li class="fragment">definition</li>
                <li class="fragment">organization</li>
                <li class="fragment">order of "execution"</li>
                <li class="fragment">reverse cascade</li>
              </ul>
            </small>
          </section>
          <section>
            <h4><mark>Exposing</mark> CSS <mark>APIs</mark></h4>
            <small>
              <p>combining variables and layers</p>
              <ul>
                <li class="fragment">efficiency</li>
                <li class="fragment">maintenance</li>
                <li class="fragment">evolution</li>
              </ul>
            </small>
          </section>
        </section>
        <!-- /topics -->

        <!-- custom properties -->
        <section>
          <section>
            <h4>
              --*<br />
              CSS Custom Properties
            </h4>
            <small class="fragment">
              <p>
                Introduced by Firefox in July 2014,<br />
                and fully supported across browsers<br />
                since April 2017<br />
                <a
                  href="https://developer.mozilla.org/en-US/docs/Web/CSS/--*"
                  target="_blank"
                  rel="noopener noreferrer"
                >
                  (DOCS)
                </a>
              </p>
            </small>
          </section>

          <section>
            <h4><mark>Centralizing</mark> values</h4>
            <pre>
              <code class="hljs css" data-trim data-line-numbers>
  :root {
    --primary-color: #3498db;
    --font-size-base: 16px;
  }
  
  body {
    color: var(--primary-color);
    font-size: var(--font-size-base);
  }
              </code>
            </pre>
          </section>

          <section>
            <h4>Flowing with the <mark>cascade</mark></h4>
            <pre>
              <code class="hljs css" data-trim data-line-numbers>
  :root {
    --primary-color: #3498db;
    --font-size-base: 16px;
  }
  
  body {
    --font-size-base: 18px;
  
    color: var(--primary-color);
    font-size: var(--font-size-base);
  }
              </code>
            </pre>
          </section>

          <section>
            <h4><mark>Dynamic</mark> and <mark>Conditional</mark> overrides...</h4>
            <pre>
              <code class="hljs css" data-trim data-line-numbers>
  :root {
    --background-color: #ffffff;
    --text-color: #000000;
  }
  
  @media (prefers-color-scheme: dark) {
    --background-color: #000000;
    --text-color: #ffffff;
  }
  
  body {
    background-color: var(--background-color);
    color: var(--text-color);
  }
              </code>
            </pre>
          </section>

          <section>
            <h4>...the same goes for <mark>Responsive</mark></h4>
            <pre>
              <code class="hljs css" data-trim data-line-numbers>
  :root {
    --padding: 8px;
  }
  
  @media (min-width: 600px) {
    :root {
      --padding: 16px;
    }
  }
  
  .container {
    padding: var(--padding);
  }
              </code>
            </pre>
          </section>
          <section>
            <h4>Javascript interaction</h4>
            <small>
              <p>Common js "CRUD" operations with CSS custom properties<br /></p>
            </small>
          </section>

          <section>
            <p>Reading a variable from an element</p>
            <pre>
              <code class="hljs javascript" data-trim data-line-numbers>
  const button = document.querySelector('button');
  
  // gets the "--primary-color" value
  // from element's CSSStyleDeclaration
  
  //! may be null if the variable is not defined on the element itself
  button.style.getPropertyValue('--primary-color');
  
  // gets the "--primary-color" value
  // from the element's ComputedStyle, 
  // so with inherited values too
  
  //! may be an empty string if the variable is not defined on 
  //! the element itself nor any of its ancestors
  getComputedStyle(button).getPropertyValue('--primary-color');
              </code>
            </pre>
          </section>

          <section>
            <p>Reading a variable from :root</p>
            <pre>
              <code class="hljs javascript" data-trim data-line-numbers>
  const root = document.documentElement;
  
  // gets the "--primary-color" value
  // from the root element's ComputedStyle

  //! may be an empty string if the variable is not defined
  getComputedStyle(root).getPropertyValue('--primary-color');
              </code>
            </pre>
          </section>

          <section>
            <h4>Writing a variable to an element</h4>
            <pre>
              <code class="hljs javascript" data-trim data-line-numbers>
  const button = document.querySelector('button');
  
  // sets the "--primary-color" value
  // to the element's CSSStyleDeclaration
  button.style.setProperty('--primary-color', '#e74c3c');
              </code>
            </pre>
          </section>

          <section>
            <h4>Writing a variable to :root</h4>
            <pre>
              <code class="hljs javascript" data-trim data-line-numbers>
  const root = document.documentElement;
  
  // sets the "--primary-color" value 
  // to the root element's CSSStyleDeclaration
  root.style.setProperty('--primary-color', '#e74c3c');
              </code>
            </pre>
          </section>

          <section>
            <h4>Deleting a variable from an element</h4>
            <pre>
              <code class="hljs javascript" data-trim data-line-numbers>
  const button = document.querySelector('button');
  
  // deletes the "--primary-color" variable
  // from the element's CSSStyleDeclaration
  button.style.removeProperty('--primary-color');
              </code>
            </pre>
          </section>

          <section>
            <h4>Deleting a variable from :root</h4>
            <pre>
              <code class="hljs javascript" data-trim data-line-numbers>
  const root = document.documentElement;
  
  // deletes the "--primary-color" variable
  // from the root element's CSSStyleDeclaration
  root.style.removeProperty('--primary-color');
              </code>
            </pre>
          </section>
        </section>
        <!-- /custom properties -->

        <section>
          <section>
            <h4><mark>@property</mark> definition</h4>
            <h5>and the CSS Properties and Values API</h5>
            <small class="fragment">
              <p>
                Introduced by Chrome in August 2020,<br />
                and fully supported across browsers<br />
                since <mark>July 2024</mark><br />
                <a
                  href="https://developer.mozilla.org/en-US/docs/Web/CSS/@property"
                  target="_blank"
                  rel="noopener noreferrer"
                >
                  (@property DOCS)
                </a>
                <br />
                <a
                  href="https://developer.mozilla.org/en-US/docs/Web/API/CSS_Properties_and_Values_API"
                  target="_blank"
                  rel="noopener noreferrer"
                >
                  (CSS Properties and Values API DOCS)
                </a>
              </p>
            </small>
          </section>
          <section>
            <h4>Registering a variable via CSS</h4>
            <pre>
              <code class="hljs css" data-trim data-line-numbers>
  @property --coffee-color {
    syntax: "&lt;color&gt;";
    inherits: false;
    initial-value: #c0ffee;
  }
              </code>
            </pre>
          </section>
          <section>
            <h4>Registering a variable via JS</h4>
            <pre>
              <code class="hljs javascript" data-trim data-line-numbers>
  window.CSS.registerProperty({
    name: "--coffee-color",
    syntax: "&lt;color&gt;",
    inherits: false,
    initialValue: "#c0ffee",
  });
              </code>
            </pre>
          </section>
          <section>
            <h4>Differences between registered and unregistered variables</h4>
            <pre>
              <code class="hljs css" data-trim data-line-numbers>
  .unregistered {
    --unregistered--coffee-color: #c0ffee;
    background-image: linear-gradient(to right, #fff, var(--unregistered--coffee-color));
    transition: --unregistered--coffee-color 1s ease-in-out;
    
    &:hover,
    &:focus {
      --unregistered--coffee-color: #b4d455;
    }
  }
  
  .registered {
    --coffee-color: #c0ffee;
    background-image: linear-gradient(to right, #fff, var(--coffee-color));
    transition: --coffee-color 1s ease-in-out;
    
    &:hover,
    &:focus {
      --coffee-color: #b4d455;
    }
  }
              </code>
            </pre>
          </section>
          <section>
            <h4>Example with registered vs unregistered properties</h4>
            <small>
              <p>in combination with CSS transitions</p>
            </small>
            <p registered-comparison>
              <button class="unregistered">Background Not Registered</button>
              <button class="registered">Background Registered</button>
            </p>
            <pre>
              <code class="hljs html" data-trim data-line-numbers>
  &lt;button class="unregistered"&gt;Background Not Registered&lt;/button&gt;
  &lt;button class="registered"&gt;Background Registered&lt;/button&gt;
              </code>
            </pre>
          </section>
          <section>
            <h4>Animations with registered properties</h4>
            <pre>
              <code class="hljs css" data-trim data-line-numbers>
  @property --intro--color--fade {
    initial-value: #b19cd8;
    inherits: false;
    syntax: '&lt;color&gt;';
  }

  :root {
    --intro--color--purple-400: #b19cd8;
    --intro--color--cyan-400: #87dbff;
    --intro--color--green-400: #4fd4ae;
    --intro--color--yellow-400: #fdd45b;
    --intro--color--red-400: #e86a58;
  }
              </code>
            </pre>
          </section>
          <section>
            <h4>Animations with registered properties</h4>
            <pre>
              <code class="hljs css" data-trim data-line-numbers>
  @keyframes intro {
    0% {
      --intro--color--fade: var(--intro--color--purple-400);
    }
    25% {
      --intro--color--fade: var(--intro--color--cyan-400);
    }
    50% {
      --intro--color--fade: var(--intro--color--green-400);
    }
    75% {
      --intro--color--fade: var(--intro--color--yellow-400);
    }
    100% {
      --intro--color--fade: var(--intro--color--red-400);
    }
  }
              </code>
            </pre>
          </section>
          <section>
            <h4>Animations with registered properties</h4>
            <pre>
                <code class="hljs css" data-trim data-line-numbers>
  h2 {
    --stagger--delay: 300ms;
    --stagger--index: 0;

    span {
      color: var(--intro--color--fade);
      animation: intro 5s linear calc(var(--stagger--delay) * var(--stagger--index)) infinite alternate;

      &:nth-child(1) { --stagger--index: 0; } // S
      &:nth-child(2) { --stagger--index: 1; } // u
      &:nth-child(3) { --stagger--index: 2; } // p
      &:nth-child(4) { --stagger--index: 3; } // e
      &:nth-child(5) { --stagger--index: 4; } // r
      &:nth-child(6) { --stagger--index: 5; } // p
      &:nth-child(7) { --stagger--index: 6; } // o
      &:nth-child(8) { --stagger--index: 7; } // w
      &:nth-child(9) { --stagger--index: 8; } // e
      &:nth-child(10) { --stagger--index: 9; } // r
      &:nth-child(11) { --stagger--index: 10; } // s
    }
  }
                </code>
              </pre>
          </section>
          <section intro>
            <h4>Animations with registered properties</h4>
            <h2>
              <span>S</span><span>u</span><span>p</span><span>e</span><span>r</span><span>p</span><span>o</span
              ><span>w</span><span>e</span><span>r</span><span>s</span>
            </h2>
            <pre>
              <code class="hljs html" data-trim data-line-numbers>
  &lt;h2&gt;
    &lt;span&gt;S&lt;/span&gt;
    &lt;span&gt;u&lt;/span&gt;
    &lt;span&gt;p&lt;/span&gt;
    &lt;span&gt;e&lt;/span&gt;
    &lt;span&gt;r&lt;/span&gt;
    &lt;span&gt;p&lt;/span&gt;
    &lt;span&gt;o&lt;/span&gt;
    &lt;span&gt;w&lt;/span&gt;
    &lt;span&gt;e&lt;/span&gt;
    &lt;span&gt;r&lt;/span&gt;
    &lt;span&gt;s&lt;/span&gt;
  &lt;/h2&gt;
              </code>
            </pre>
          </section>
        </section>

        <!-- layers -->
        <section>
          <section>
            <h4>@layer</h4>
            <h5>CSS Layers</h5>
            <small class="fragment">
              <p>
                Introduced by Firefox in February 2022,<br />
                and fully supported across browsers<br />
                since March 2022<br />
                <a
                  href="https://developer.mozilla.org/en-US/docs/Web/CSS/@layer"
                  target="_blank"
                  rel="noopener noreferrer"
                >
                  (DOCS)
                </a>
              </p>
            </small>
          </section>

          <section>
            <p>Esempio di CSS Layers</p>
            <pre>
              <code class="hljs css" data-trim data-line-numbers>
  @layer reset {
    * {
      box-sizing: border-box;
      ...
    }
  }
  
  @layer components {
    button {
      border-size: 1px solid lightgray;
    }
  }
  
  @layer layout {
    body {
      display: grid;
      grid-template-areas:
        'header header'
        'aside main'
        'footer footer';
    }
  }
  
            </code></pre>
          </section>

          <section>
            <p>"Esecuzione" dei layer nell'ordine che si desidera</p>
            <pre>
              <code class="hljs css" data-trim data-line-numbers>
  @layer reset, layout, components;
              </code>
            </pre>
          </section>

          <section>
            <p>Livelli di Profondità e Override (Reverse Cascade)</p>
            <pre>
              <code class="hljs css" data-trim data-line-numbers>
  :root {
    --ui--font-size: 10px;
  }
              
  @layer ui {
    :root {
      --ui--font-size: 16px;
    }
  }
  
  @layer ui.button {
    :root {
      --ui--font-size: 18px;
    }
    
    button {
      font-size: var(--ui--font-size);
    }
  }
  
  @layer ui.input {
    :root {
      --ui--font-size: 20px;
    }
    
    input {
      font-size: var(--ui--font-size);
    }
  }
              </code>
            </pre>
          </section>

          <section>
            <p>è come esporre un API</p>
            <pre>
              <code class="hljs css" data-trim data-line-numbers>
  :root {
    --ui--font-size: 10px;
    --ui--button--border-color: ...;
    --ui--input--padding-inline: ...;
    
    ...
  }
              
  @layer ui {
    :root {
      --ui--font-size: 16px;
      
      ...
    }
  }
  
  ...
              </code>
            </pre>
          </section>
        </section>
        <!-- /layers -->

        <!-- quando introduci i layers non dare per scontato la Css cascade, non è detto che tutti la sappiamo benissimo.
@layer: mostrare quali problemi risolve (prima e dopo slides maybe). Come si faceva prima?
riusciamo ad inserire @property prima di @layer? C'è tempo?
aggiungere magari piccolo excursus di come sono introdotti nella vostra azienda. Ci sono state resistenze o difficoltà iniziali?
non dare per scontato le parole rebranding e reselling. L'audience è italiana e potrebbe non aver affrontato questi casi.
aggiungere link QR code delle slides prima del grazie -->

        <!-- Slide 2: Introduzione -->
        <!-- <section>
          <p>Goals</p>
          <small>
          <ul>
            <li>Proactive Strategy</li>
            <li class="fragment">Scalability</li>
            <li class="fragment">Maintainability</li>
          </ul>
        </small> -->
        <!-- <p>Benvenuti a questo talk tecnico sull'importanza dell'over engineering nelle codebase CSS.</p>
          <p>
            Esploreremo come l'uso strategico di <strong>CSS Variables</strong> e <strong>CSS Layers</strong> possa migliorare l'efficienza e preparare il terreno per future
            evoluzioni.
          </p> -->
        <!-- </section> -->

        <!-- Slide 3: Il Concetto di Over Engineering -->
        <!-- <section>
          <h2>1. Il Concetto di Over Engineering nel CSS</h2>
          <ul>
            <li><strong>Definizione:</strong> Strategia proattiva per anticipare esigenze future.</li>
            <li><strong>Applicazione al CSS:</strong> Facilita modifiche, aggiornamenti e scalabilità.</li>
          </ul>
        </section> -->

        <!-- Slide 4: Vantaggi dell'Over Engineering -->
        <!-- <section>
          <h2>2. Vantaggi dell'Over Engineering</h2>
          <ul>
            <li><strong>Scalabilità e Flessibilità</strong></li>
            <li><strong>Manutenibilità a Lungo Termine</strong></li>
            <li><strong>Coerenza e Standardizzazione</strong></li>
          </ul>
        </section> -->

        <!-- Slide 5: CSS Variables -->

        <!-- Slide 10: CSS Layers -->

        <!-- Slide 13: Prepararsi alle Evoluzioni Future -->
        <section>
          <p>Vantaggi</p>
          <ul>
            <li>Manutenzione Efficiente</li>
            <li class="fragment">Progressive Enhancement</li>
            <li class="fragment">Nuovi temi grafici</li>
            <li class="fragment">Documentazione Interna</li>
            <li>Proactive Strategy</li>
            <li class="fragment">Scalability</li>
            <li class="fragment">Maintainability</li>
          </ul>
        </section>

        <!-- Slide 16: Riduzione dei Tempi di Debug -->
        <section>
          <p>Svantaggi</p>
          <ul>
            <li>Bootstrap dei progetti inizialmente più complesso</li>
            <li class="fragment"><strong>Impatto Minimo</strong> sulle performance (ma attenti a non strafare)</li>
          </ul>
        </section>

        <!-- Slide 19: Case Study -->
        <section>
          <p>Case Study: Rebranding</p>
          <ul>
            <li><strong>Situazione:</strong> Codebase estesa e disorganizzata</li>
            <li class="fragment">Aggiornare l'aspetto grafico modificando colori, spaziature, typography, etc...</li>
          </ul>
        </section>

        <!-- Slide 19: Case Study -->
        <section>
          <p>Case Study: Re-Selling o prodotti multi-tenant</p>
          <ul>
            <li><strong>Situazione:</strong> Stessa codebase diverso cliente</li>
            <li class="fragment">Aggiornare l'aspetto grafico modificando colori, spaziature, typography, etc...</li>
          </ul>
        </section>

        <!-- Slide 20: Conclusioni -->
        <section>
          <p>Conclusioni</p>
          <ul>
            <li>L'over engineering come investimento strategico.</li>
            <li class="fragment">Preparazione per l'evoluzione continua del CSS.</li>
            <li class="fragment"><strong>Invito all'azione:</strong> Sperimentare e condividere.</li>
          </ul>
        </section>

        <!-- Slide 21: Grazie -->
        <section>
          <h2>Grazie ❤️!</h2>
        </section>
      </div>
    </div>
    <script src="./scripts/index.js" type="module"></script>
  </body>
</html>
